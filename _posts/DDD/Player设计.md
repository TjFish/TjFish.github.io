## 业务规则

基础配置如下：

- 玩家（Player）可以是战士（Fighter）、法师（Mage）、龙骑（Dragoon）
- 怪物（Monster）可以是兽人（Orc）、精灵（Elf）、龙（Dragon），怪物有血量
- 武器（Weapon）可以是剑（Sword）、法杖（Staff），武器有攻击力

玩家可以装备一个武器，武器攻击可以是物理类型（0），火（1），冰（2）等，武器类型决定伤害类型。攻击规则如下：

- 兽人对物理攻击伤害减半
- 精灵对魔法攻击伤害减半
- 龙对物理和魔法攻击免疫，除非玩家是龙骑，则伤害加倍

装备规则如下：

- 战士只能装备剑
- 法师只能装备法杖
- 龙骑都可以装备

## DDD设计

1. 理解需求绘制构建类图，描绘各个对象的关系。
2. 隔离领域——引入应用层
   - Equip：玩家能装备武器
   - Combat：玩家能攻击怪兽
   - Monster_State能查看怪兽血量
3. Entity包括：玩家，武器，怪兽。
4. 设计系统中的关联
5. 划分Aggregate边界：
6. 设置Repository：

## DDD 实践



### 领域服务（Service）

### 单对象领域服务

单对象服务目的是服务单个Entity

### 多对象领域服务

#### 通用组件领域服务

批处理都可以服务化，组件化。

对需要批处理的对象，可以让对象都获得组件，随后在统一的地方对这些组件做批处理。