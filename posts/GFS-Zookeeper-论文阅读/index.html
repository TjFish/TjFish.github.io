<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="GFS - Zookeeper-论文阅读" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="GFS" /><meta property="og:description" content="GFS" /><link rel="canonical" href="https://tjfish.top//posts/GFS-Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" /><meta property="og:url" content="https://tjfish.top//posts/GFS-Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" /><meta property="og:site_name" content="TjFish" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-12T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="GFS - Zookeeper-论文阅读" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-28T15:24:05+08:00","datePublished":"2022-09-12T00:00:00+08:00","description":"GFS","headline":"GFS - Zookeeper-论文阅读","mainEntityOfPage":{"@type":"WebPage","@id":"https://tjfish.top//posts/GFS-Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"},"url":"https://tjfish.top//posts/GFS-Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"}</script><title>GFS - Zookeeper-论文阅读 | TjFish</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TjFish"><meta name="application-name" content="TjFish"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.proxy.ustclug.org" ><link rel="dns-prefetch" href="https://fonts.proxy.ustclug.org" ><link rel="preconnect" href="https://fonts-gstatic.proxy.ustclug.org" crossorigin><link rel="dns-prefetch" href="https://fonts-gstatic.proxy.ustclug.org" crossorigin><link rel="preconnect" href="https://fonts.proxy.ustclug.org" ><link rel="dns-prefetch" href="https://fonts.proxy.ustclug.org" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.proxy.ustclug.org/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3339048495146586" crossorigin="anonymous"></script> <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">TjFish</a></div><div class="site-subtitle font-italic">记录生活</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>所有文章</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于作者</span> </a><li class="nav-item"> <a href="/project/" class="nav-link"> <i class="fa-fw fas fa-star ml-xl-3 mr-xl-3 unloaded"></i> <span>我的作品</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/TjFish" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['150939023','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>GFS - Zookeeper-论文阅读</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索文章..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>GFS - Zookeeper-论文阅读</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://tjfish.github.io/">TjFish</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1662912000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-12 </em> </span> <span> 更新于 <em class="timeago" data-ts="1666941845" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-10-28 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2797 字"> <em>15 分钟</em>阅读</span></div></div></div><div class="post-content"><h1 id="gfs">GFS</h1><p>GFS是Google于2003年发表的论文，在真实系统上构建了大范围的分布式文件系统。GFS 的地位相当之高，与MapReduce 以及 BigTable 作为早年间Google的大数据三驾马车，虽然这些年随着时代都逐渐被取代了。下面是Google 文件系统发展的系统分支。</p><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/image-20200723104934578.png" alt="image-20200723104934578" data-proofer-ignore></p><p>GFS的研究动机：Google拥有远超过单个磁盘容量的数据，例如从整个互联网爬出来的网页，YouTube视频，用来构建搜索索引的中间文件，Web服务器中的大量日志文件等。基于此，Google的目标是构建一个大型的，快速的文件系统。并且这个文件系统是全局有效的，这样各种不同的应用程序都可以从中读取数据。</p><h2 id="背景与假设"><span class="mr-2">背景与假设</span><a href="#背景与假设" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p><strong>背景 1：分布式组件经常发生错误，应当将此视为常态而不是意外</strong>；</p><blockquote><p>组件（也就是分布式系统中的 commodity hardware，可以理解为配置不高的商用主机）发生错误的原因有很多，比如：应用或者操作系统 BUG，人为错误、硬盘、内存、网络甚至是电源故障；</p></blockquote><li><p><strong>背景 2：文件通常是大文件，而不是小文件</strong>；</p><blockquote><p>这里的大文件是相对于传统标准而言的，比如 GB 在这属于大文件，KB 级别属于小文件；论文指出，应当操作大文件而不是小文件，即使系统本身支持 billion 级别（十亿个）的 kB 大小的文件的操作，但是这种操作也是不明智的，因为会明显巨大的额外开销。</p><p>这是一个非常重要的假设，因为后面会提到 GFS 中直接将 chuksize 设置为 64 MB，因为我们面对的是大文件，因此即使以 64MB 这么大的空间作为存储的管理单元，磁盘空间的浪费也不会很严重。</p></blockquote><p><strong>背景 3：大部分文件（主要是指字节数量占比高，而不是操作次数）通过 append（在已有的文件末尾追加）新数据的方式实现修改，而不是直接重写现有数据</strong>；</p><blockquote><p>这是基于 Google 对 GFS 的应用场景的判断而做出的背景，因为大部分操作都是 append，因此 GFS 系统优化的中心也放在 record append 操作上。而对于随机写 GFS 仅仅给出一个存在不一致性问题的解决方案。</p><p>总之，这种假设下 I/O 操作都是顺序 I/O，效率比随机 I/O 高很多。</p></blockquote><li><p><strong>背景 4：协同设计应用以及文件系统可以提高系统整体灵活性，最终使整个系统收益</strong></p></ul><h2 id="gfs的架构"><span class="mr-2">GFS的架构</span><a href="#gfs的架构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>一个 GFS cluster（集群）分为两个组件：</p><ul><li><strong>单个</strong> master 节点；<li><strong>多个</strong> chunkserver 节点；</ul><p>一个 GFS 集群同时可以被多个 client（客户）节点访问，架构图如下所示：</p><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/image-20200719162238223.png" alt="image-20200719162238223" data-proofer-ignore></p><p>可见 GFS 集群是一个典型 Master + Worker 结构。</p><blockquote><p>Master + Worker 结构说的是存在一个 Master 来管理任务、分配任务，而 Worker 是真正干活的节点。在这里干的活自然是数据的存储和读取</p></blockquote><h3 id="chunk-servers"><span class="mr-2">Chunk Servers</span><a href="#chunk-servers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>GFS将一个大文件（比如10GB）分为多个Chunk，Chunk大小为64MB。Chunk分散存储在多台Chunk Server上。并且可以对文件做备份，一个Chunk可以复制多份分散存储。</p><p>下图体现了 GFS 分布式系统架构的<strong>分布式</strong>结构以及<strong>文件的分块存储特性</strong>：</p><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/image-20200723110430786.png" alt="image-20200723110430786" data-proofer-ignore></p><h3 id="master"><span class="mr-2">Master</span><a href="#master" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Master 周期性通过 HeartBeat 机制和每一个 chunkserver 进行通信，进行指令的发送以及状态信息的接收。</p><p>Master记录每个Chunk 的存储位置，相当于配置文件服务器（类似于中间件的名称服务器）。Master本身不做代理，由Client直接与chunkserver通讯。</p><p>GFS 仅仅只有一个 Master 服务器，这极大地简化了设计难度。</p><blockquote><p>当然，这样也会引入问题。比如 GFS 的 Master 节点在故障以后，并没有自我恢复功能，虽然需要额外的机制来保证Master节点的高容错。论文中Master 节点需要人工地进行故障恢复，这会导致小时级别的 GFS 系统不可写</p></blockquote><p>Master节点配置文件管理具体来说：</p><ul><li><p>客户端向 Master 节点请求的 metadata 数据直接存储于 Master 的内存中，避免每次请求都需要进行磁盘 I/O；</p><li><p>Master 节点使用日志（WAL Write-Ahead Log） + checkpoint 的方式来确保数据的持久化；（snapshot of memory）</p></ul><h2 id="一致性"><span class="mr-2">一致性</span><a href="#一致性" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>放弃了强一致性</p><h1 id="zookeeper">Zookeeper</h1><h2 id="介绍"><span class="mr-2">介绍</span><a href="#介绍" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p>Zookeeper是一个构建在Zab协议上的分布式独立服务，用来帮助人们构建分布式系统，极大的减轻构建分布式应用的痛苦。</p><li>Zookeeper内部的Zab协议和Raft协议非常相似，功能都是提供分布式一致性，内部实现也分为选举和日志同步。相比Raft来说，Raft不是一个你可以直接交互的独立的服务，你必须要设计你自己的应用程序来与Raft库交互。<li>Zookeeper通过放弃线性一致性来解决性能和一致性的矛盾。提供更弱的一致性，带来更强的性能，更多的服务器可以提供更强读性能。</ul><h2 id="一致性保证"><span class="mr-2">一致性保证</span><a href="#一致性保证" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Zookeeper提供以下的一致性保证：</p><ul><li>写请求是线性一致性的：写请求都经过leader节点，保证线性一致。读请求可以发送到任意副本节点，不保证线性一致。<li>对于单个客户端是线性一致的<ul><li>任何一个客户端的请求，都会按照客户端指定的顺序来执行，论文里称之为<strong>FIFO</strong>（First In First Out）客户端序列。<li>对于多个客户端并访问，不能保证一致性。即A客户端写入数据后，B客户端立即来读该数据，可能读取不到A客户端写入的数据。也就是说从Zookeeper读到的数据不能保证是最新的。<li>从实现角度，Zookeeper给每条日志加上zxid的标签，响应请求时服务端返回最新zxid。客户端记录并在发送请求时带上该zxid，表明应该至少在zxid 的日志之后执行这个请求。</ul></ul><h2 id="api设计"><span class="mr-2">API设计</span><a href="#api设计" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Zookeeper的API设计使得它可以成为一个通用的服务，从而分担一个分布式系统所需要的大量工作。那么为什么Zookeeper的API是一个好的设计？具体来看，因为它实现了一个值得去了解的概念：<strong>mini-transaction</strong>。</p><p>之所以称之为mini-transaction，是因为Zookeeper并不能提供一个完整的数据库事务（transaction）。一个真正的数据库可以使用完整的通用的事务，你可以指定事务的开始，然后执行任意的数据读写，之后结束事务。数据库可以聪明的将所有的操作作为一个原子事务提交。一个真实的事务可能会非常复杂，而Zookeeper支持非常简单的事务，使得我们可以对于一份数据实现原子操作。这对于计数器或者其他的一些简单功能足够了。所以，这里的事务并不通用，但是的确也提供了原子性，所以它被称为mini-transaction。</p><p>Zookeeper可以用来做很多有用的事情</p><ul><li>用来发布其他服务器使用的配置信息。例如，向某些Worker节点发布当前Master的IP地址。<li>用来选举Master。master节点挂掉后，需要让所有的节点都认可同一个新的Master节点。比如用到GFS中，用来实现Master切换。<li>MapReduce系统Worker的注册，任务的分配。</ul><h1 id="复制">复制</h1><p>像前面提到的GFS与Zookeeper系统，都致力于解决数据的同步问题，或者说是数据间复制的问题。</p><p>复制（Replication）：为了提供高容错高可用性，最常见的解决方式就是<strong>复制</strong>。一个很有意思的问题是：复制能处理什么样的问题？复制并不是万能的。</p><ul><li>解决fail-stop故障：如果某些东西出了故障，就会单纯停止运行。<li>不能处理软件中的bug和硬件设计中缺陷</ul><p>复制的方式有两种</p><ul><li>状态转移（<strong>State Transfer</strong>）：主服务器将完整状态都传输给备份服务器。这样的方案会较为简单，但需传输的数据量较大。<ul><li>举例：Ctrl+C， Ctrl+V<li>Raft协议中拷贝快照，快照迁移</ul><li>备份状态机（<strong>Replicated State Machine</strong>）：将需要备份的服务器视为一个确定性状态机，服务器执行相同的命令进行状态更新，只要执行的命令相同，最终状态一定相同。方案较为复杂，但网络传输量小很多。<ul><li>举例：Raft协议<li>VMware 虚拟机主从备份</ul></ul><h2 id="主从复制"><span class="mr-2">主从复制</span><a href="#主从复制" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>主从复制（Primary-Backup Replication）是一种常用的复制手段：</p><p>主服务器负责写请求，从服务器负责读请求，从服务器时刻和主服务保持联系，与主服务器保持一致，这样当主服务器失效后备份服务器才能立刻接管。</p><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/主从复制.jpg" alt="主从复制" data-proofer-ignore></p><h2 id="链式复制"><span class="mr-2">链式复制</span><a href="#链式复制" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>链式复制（Chain Replication），是使用非常广泛的复制模型，要将数据复制到全部节点之后，再向client应答成功。链式复制在发展过程中，从基本链式复制发展出了多种改进版本，来改进复制延迟。</p><p>链式复制中，所有服务节点组成一条链。</p><ul><li><p>Client写请求发送给Head节点，Head节点写入之后再转发给下一个节点，依次转发直到Tail节点。只有Tail节点更新成功后该写请求才commit。</p><li><p>Client写请求发送给Tail节点，Tail节点是最后一个更新，可以读取到所有已经commit的数据，保证强一致性。</p></ul><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/chain_rep.png" alt="img" data-proofer-ignore></p><p><img data-src="/assets/img/2022-09-12-Chain Replication.assets/image-20220912093117046.png" alt="image-20220912093117046" data-proofer-ignore></p><p>参考链接</p><ul><li><p>什么是数据库的一致性？一致性弱意味着什么？NoSQL 的弱一致性又为什么是可以被接受的？ - 华为云开发者联盟的回答 - 知乎 https://www.zhihu.com/question/20113030/answer/1834857103</p><li><p>etcd 和传统的数据库有什么区别，为什么分布式架构都要用这个玩意儿？ - 达的回答 - 知乎 https://www.zhihu.com/question/283164721/answer/2315076332</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E5%88%86%E5%B8%83%E5%BC%8F/'>分布式</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" class="post-tag no-text-decoration" >分布式</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=GFS+-+Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB+-+TjFish&url=https%3A%2F%2Ftjfish.top%2F%2Fposts%2FGFS-Zookeeper-%25E8%25AE%25BA%25E6%2596%2587%25E9%2598%2585%25E8%25AF%25BB%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="http://connect.qq.com/widget/shareqq/index.html?url=https%3A%2F%2Ftjfish.top%2F%2Fposts%2FGFS-Zookeeper-%25E8%25AE%25BA%25E6%2596%2587%25E9%2598%2585%25E8%25AF%25BB%2F&text=GFS+-+Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB+-+TjFish" data-toggle="tooltip" data-placement="top" title="QQ" target="_blank" rel="noopener" aria-label="QQ"> <i class="fa-fw fab fa-qq"></i> </a> <a href="http://service.weibo.com/share/share.php?title=GFS+-+Zookeeper-%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB+-+TjFish&url=https%3A%2F%2Ftjfish.top%2F%2Fposts%2FGFS-Zookeeper-%25E8%25AE%25BA%25E6%2596%2587%25E9%2598%2585%25E8%25AF%25BB%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MIT%E5%88%86%E5%B8%83%E5%BC%8F%E8%AF%BE%E7%A8%8B%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/">Raft分布式一致性协议的实现思路</a><li><a href="/posts/DDD%E5%85%A5%E9%97%A8%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">领域驱动设计学习总结与记录</a><li><a href="/posts/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%AE%9E%E4%B9%A0%E6%8A%A5%E5%91%8A/">字节跳动实习报告</a><li><a href="/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B/">大型任务的多进程优化过程记录，从3个月优化到3天</a><li><a href="/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8FStrategy/">设计模式-策略模式，封装复杂的领域知识</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/oracle-apex/">Oracle Apex</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/">小技巧</a> <a class="post-tag" href="/tags/%E7%99%BD%E7%9B%92%E5%AF%86%E7%A0%81%E5%AD%A6/">白盒密码学</a> <a class="post-tag" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a> <a class="post-tag" href="/tags/%E8%AF%BE%E7%A8%8B/">课程</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E5%88%86%E5%B8%83%E5%BC%8FMapReduce/"><div class="card-body"> <em class="timeago small" data-ts="1659283200" > 2022-08-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>分布式MapReduce</h3><div class="text-muted small"><p> 最近暑假在家有空，跟着MIT分布式系统课程学一学分布式系统，顺便跟着课程实验学一学go，希望能在开学前学完吧。 分布式系统介绍 分布式系统：多台计算机合作提供服务。 为什么要构建分布式系统？ 通过并行增加处理容量 通过复制来容忍故障 通过隔离实现安全 和现实世界物理设备（例如传感器）的分布相匹配 分布式系统的困难？ 许多并发部分，复杂的交互过程 必须...</p></div></div></a></div><div class="card"> <a href="/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"><div class="card-body"> <em class="timeago small" data-ts="1663516800" > 2022-09-19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>什么是分布式事务?</h3><div class="text-muted small"><p> 分布式事务 什么是分布式事务 事务是应用程序中一系列严密的操作，所有操作必须成功完成，否则在每个操作中所作的所有更改都会被撤消。 事务的四个属性 Atomic，原子性。它意味着，事务可能有多个步骤，比如说写多个数据记录，尽管可能存在故障，但是要么所有的写数据都完成了，要么没有写数据能完成。不应该发生类似这种情况：在一个特定的时间发生了故障，导致事务中一半的写数据完成并可见，另一...</p></div></div></a></div><div class="card"> <a href="/posts/MIT%E5%88%86%E5%B8%83%E5%BC%8F%E8%AF%BE%E7%A8%8B%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF/"><div class="card-body"> <em class="timeago small" data-ts="1667404800" > 2022-11-03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Raft分布式一致性协议的实现思路</h3><div class="text-muted small"><p> 暑期的时候参加了麻省理工大学的分布式系统课程（MIT 6.824 ），其中的课程实验要求实现Raft分布式一致性协议，一致性协议的应用是为了维护各节点数据的一致性，换句话说，就是使集群里的节点存储的数据是一模一样的。实现Raft协议后，需要在此基础上实现基于Raft的kv数据库。 项目开发语言是GO，之前并没有接触过，也顺便跟着课程实验学一学。 目前已经完成了前三个课程实验，实现了一个基...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E5%88%86%E5%B8%83%E5%BC%8FMapReduce/" class="btn btn-outline-primary" prompt="上一篇"><p>分布式MapReduce</p></a> <a href="/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" class="btn btn-outline-primary" prompt="下一篇"><p>什么是分布式事务?</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "TjFish/TjFish.github.io", "data-repo-id": "R_kgDOG90Emg", "data-category": "Announcements", "data-category-id": "DIC_kwDOG90Ems4COBNe", "data-mapping": "title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "zh-CN", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://tjfish.github.io/">TjFish</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/oracle-apex/">Oracle Apex</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/">小技巧</a> <a class="post-tag" href="/tags/%E7%99%BD%E7%9B%92%E5%AF%86%E7%A0%81%E5%AD%A6/">白盒密码学</a> <a class="post-tag" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a> <a class="post-tag" href="/tags/%E8%AF%BE%E7%A8%8B/">课程</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2CTWBS5MFX"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2CTWBS5MFX'); }); </script>
